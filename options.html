<!DOCTYPE html>
<html lang='en'>
	<head>
		<title>jsFiddle options</title>
		<meta name='author' content='Oliver Caldwell'>
		<meta http-equiv='Content-Type' content='text/html; charset=utf-8'>
		<link rel='stylesheet' type='text/css' href='options-style.css' />
	</head>
	
	<div class='banner'>
		<a href='http://jsfiddle.net/' target='_blank'>
			<img src='icon-inverted.png' alt='jsFiddle' />
			<h1>jsFiddle - Enter your username in here and press enter: </h1>
		</a>
		
		<input type='text' />
		<h1 id='status'></h1>
	</div>
	
	<body>
		<script type='text/javascript' src='Spark-v1.4.5.js'></script>
		<script type='text/javascript'>
			Spark.ready(function() {
				// Get their one they already entered if they have one
				if(localStorage['username'] !== undefined) {
					Spark('input').attribute({value: localStorage['username']});
				}
				
				// Listen for the keypress event in the input
				Spark('input').event('keypress', function(e) {
					// If it was enter
					if(e.keyCode == 13) {
						// Set their name
						localStorage['username'] = e.target.value;
						
						// Show that it was set
						Spark('h1#status').content('Username set to ' + e.target.value);
					}
				});
			});
		</script>
	</body>
</html>